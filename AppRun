#!/bin/bash
# AppRun script for ScreenOCR AppImage
# This is the entry point when launching the AppImage

set -e

# Get the directory where this AppImage is mounted
export APPDIR="${APPDIR:-.}"

# Setup library paths
export LD_LIBRARY_PATH="${APPDIR}/usr/lib:${APPDIR}/usr/lib/x86_64-linux-gnu:${LD_LIBRARY_PATH}"
export PATH="${APPDIR}/usr/bin:${APPDIR}/usr/sbin:${PATH}"
export PYTHONPATH="${APPDIR}/usr/lib/python3.11:${APPDIR}/usr/lib/python3.11/site-packages:${PYTHONPATH}"

# Set Qt plugin path
export QT_PLUGIN_PATH="${APPDIR}/usr/lib/qt6/plugins"

# Run the application
exec "${APPDIR}/usr/bin/python3" "${APPDIR}/screenocr.py" "$@"
